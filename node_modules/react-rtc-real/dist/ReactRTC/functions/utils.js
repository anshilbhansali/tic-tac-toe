"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createPayload = exports.createMessage = exports.generateRoomKey = exports.buildServers = void 0;

var buildServers = function buildServers(serverURLs) {
  if (!serverURLs) return;
  var urls = serverURLs.map(function (serverURL) {
    return {
      urls: serverURL
    };
  }); // eslint-disable-next-line consistent-return

  return urls;
};

exports.buildServers = buildServers;

var replaceCharacter = function replaceCharacter(_char) {
  // eslint-disable-next-line no-mixed-operators
  // eslint-disable-next-line no-bitwise
  // eslint-disable-next-line prettier/prettier
  return (_char ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> _char / 4).toString(16);
};

var generateRoomKey = function generateRoomKey() {
  var baseString = [1e7] + -1e3 + -4e3 + -8e3 + -1e11;
  return baseString.replace(/[018]/g, replaceCharacter);
};

exports.generateRoomKey = generateRoomKey;

var createMessage = function createMessage(type, payload) {
  return {
    type: type,
    payload: payload
  };
};

exports.createMessage = createMessage;

var createPayload = function createPayload(roomKey, socketID) {
  var message = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  return {
    roomKey: roomKey,
    socketID: socketID,
    message: message
  };
};

exports.createPayload = createPayload;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9SZWFjdFJUQy9mdW5jdGlvbnMvdXRpbHMuanMiXSwibmFtZXMiOlsiYnVpbGRTZXJ2ZXJzIiwic2VydmVyVVJMcyIsInVybHMiLCJtYXAiLCJzZXJ2ZXJVUkwiLCJyZXBsYWNlQ2hhcmFjdGVyIiwiY2hhciIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIlVpbnQ4QXJyYXkiLCJ0b1N0cmluZyIsImdlbmVyYXRlUm9vbUtleSIsImJhc2VTdHJpbmciLCJyZXBsYWNlIiwiY3JlYXRlTWVzc2FnZSIsInR5cGUiLCJwYXlsb2FkIiwiY3JlYXRlUGF5bG9hZCIsInJvb21LZXkiLCJzb2NrZXRJRCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxJQUFNQSxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFBQyxVQUFVLEVBQUk7QUFDeEMsTUFBSSxDQUFDQSxVQUFMLEVBQWlCO0FBQ2pCLE1BQU1DLElBQUksR0FBR0QsVUFBVSxDQUFDRSxHQUFYLENBQWUsVUFBQUMsU0FBUztBQUFBLFdBQUs7QUFBRUYsTUFBQUEsSUFBSSxFQUFFRTtBQUFSLEtBQUw7QUFBQSxHQUF4QixDQUFiLENBRndDLENBR3hDOztBQUNBLFNBQU9GLElBQVA7QUFDRCxDQUxNOzs7O0FBT1AsSUFBTUcsZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFtQixDQUFBQyxLQUFJLEVBQUk7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsU0FBTyxDQUFDQSxLQUFJLEdBQUdDLE1BQU0sQ0FBQ0MsZUFBUCxDQUF1QixJQUFJQyxVQUFKLENBQWUsQ0FBZixDQUF2QixFQUEwQyxDQUExQyxJQUErQyxNQUFNSCxLQUFJLEdBQUcsQ0FBcEUsRUFBdUVJLFFBQXZFLENBQWdGLEVBQWhGLENBQVA7QUFDRCxDQUxEOztBQU9PLElBQU1DLGVBQWUsR0FBRyxTQUFsQkEsZUFBa0IsR0FBTTtBQUNuQyxNQUFNQyxVQUFVLEdBQUcsQ0FBQyxHQUFELElBQVEsQ0FBQyxHQUFULEdBQWUsQ0FBQyxHQUFoQixHQUFzQixDQUFDLEdBQXZCLEdBQTZCLENBQUMsSUFBakQ7QUFDQSxTQUFPQSxVQUFVLENBQUNDLE9BQVgsQ0FBbUIsUUFBbkIsRUFBNkJSLGdCQUE3QixDQUFQO0FBQ0QsQ0FITTs7OztBQUtBLElBQU1TLGFBQWEsR0FBRyxTQUFoQkEsYUFBZ0IsQ0FBQ0MsSUFBRCxFQUFPQyxPQUFQO0FBQUEsU0FBb0I7QUFBRUQsSUFBQUEsSUFBSSxFQUFKQSxJQUFGO0FBQVFDLElBQUFBLE9BQU8sRUFBUEE7QUFBUixHQUFwQjtBQUFBLENBQXRCOzs7O0FBQ0EsSUFBTUMsYUFBYSxHQUFHLFNBQWhCQSxhQUFnQixDQUFDQyxPQUFELEVBQVVDLFFBQVY7QUFBQSxNQUFvQkMsT0FBcEIsdUVBQThCLElBQTlCO0FBQUEsU0FBd0M7QUFDbkVGLElBQUFBLE9BQU8sRUFBUEEsT0FEbUU7QUFFbkVDLElBQUFBLFFBQVEsRUFBUkEsUUFGbUU7QUFHbkVDLElBQUFBLE9BQU8sRUFBUEE7QUFIbUUsR0FBeEM7QUFBQSxDQUF0QiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBidWlsZFNlcnZlcnMgPSBzZXJ2ZXJVUkxzID0+IHtcbiAgaWYgKCFzZXJ2ZXJVUkxzKSByZXR1cm47XG4gIGNvbnN0IHVybHMgPSBzZXJ2ZXJVUkxzLm1hcChzZXJ2ZXJVUkwgPT4gKHsgdXJsczogc2VydmVyVVJMIH0pKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIHJldHVybiB1cmxzO1xufTtcblxuY29uc3QgcmVwbGFjZUNoYXJhY3RlciA9IGNoYXIgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbWl4ZWQtb3BlcmF0b3JzXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmV0dGllci9wcmV0dGllclxuICByZXR1cm4gKGNoYXIgXiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+IGNoYXIgLyA0KS50b1N0cmluZygxNik7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVSb29tS2V5ID0gKCkgPT4ge1xuICBjb25zdCBiYXNlU3RyaW5nID0gWzFlN10gKyAtMWUzICsgLTRlMyArIC04ZTMgKyAtMWUxMTtcbiAgcmV0dXJuIGJhc2VTdHJpbmcucmVwbGFjZSgvWzAxOF0vZywgcmVwbGFjZUNoYXJhY3Rlcik7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTWVzc2FnZSA9ICh0eXBlLCBwYXlsb2FkKSA9PiAoeyB0eXBlLCBwYXlsb2FkIH0pO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVBheWxvYWQgPSAocm9vbUtleSwgc29ja2V0SUQsIG1lc3NhZ2UgPSBudWxsKSA9PiAoe1xuICByb29tS2V5LFxuICBzb2NrZXRJRCxcbiAgbWVzc2FnZVxufSk7XG4iXX0=